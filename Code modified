#include <stdio.h>

#define MAX_ROWS 15

// Prototypes
void PrintIntroduction(char []);
double loen(char [])
void AskForInput(double *, double *, double *);
void CalculateXValues(double, double, double, double []);
void CalculateYValues(double [], double [], int t);
void OutputResults(double [], double [], int );

// Main function
int main(void) {
    // Print introduction
    PrintIntroduction("The program will calculate x and y values in the function y=(x^3+2x-14)/7x based on entered variables.\n");

    // Input
    double start, end, step;
    AskForInput(&start, &end, &step); // Still using pointers for input

    // Prepare arrays to store x and y values
    double xValues[MAX_ROWS];
    double yValues[MAX_ROWS];
    
    // Calculate x values 
    CalculateXValues(start, end, step, xValues);
    
    // Calculate y values based on x values
    CalculateYValues(xValues, yValues, count);
    
    // Output results
    OutputResults(xValues, yValues, count);
    
    return 0;    
}

// Function to print the introduction
void PrintIntroduction(char teade[]) {

    printf('%s,teade);
}

// Function to ask for input values
void AskForInput(double start[], double end[], double step[]) {
    do {
        printf("Enter starting value A (cannot be 0): ");
        scanf("%lf", start);
    } while (*start == 0);

    do {
        printf("Enter ending value B (starting value < ending value): ");
        scanf("%lf", end);
    } while (*start >= *end);

    do {
        printf("Enter step value H (must be > 0): ");
        scanf("%lf", step);
    } while (*step <= 0);
}

// Function to calculate x values
 CalculateXValues(double start, double end, double step, double values[]) {
    double x = start;
    int count = 0;

    while (x < end && count < MAX_ROWS) {
        values[count] = x;  // Store x value
        x += step;
        count++;
    }
     count; // Return the count of values calculated
}

// Function to calculate y values based on x values
void CalculateYValues(double xValues[], double yValues[], int count) {
    for (int i = 0; i < count; i++) {
        double numerator = (xValues[i] * xValues[i] * xValues[i]) + (2 * xValues[i]) - 14;
        double denominator = 7 * xValues[i];

        if (denominator == 0) {
            yValues[i] = -1; // Indicate undefined
        } else {
            yValues[i] = numerator / denominator;
        }
    }
}

// Function to output the results in a table format
void OutputResults(double xValues[], double yValues[], int count) {
    printf("\n%10s\t%10s\n", "x", "y");
    printf("----------------------------------\n");

    for (int i = 0; i < count; i++) {
        if (yValues[i] == -1) {
            printf("%10.2f\t%s\n", xValues[i], "none");
        } else {
            printf("%10.2f\t%10.2f\n", xValues[i], yValues[i]);
        }
    }

    if (count >= MAX_ROWS) {
        printf("Program outputs first %d rows.\n", MAX_ROWS);
    }
}
